---
import type { FerretReviewer } from '@/reviewers';
import { Check } from '@lucide/astro';

interface Props {
  reviewer: FerretReviewer;
  isSelected: boolean;
}

const { reviewer, isSelected } = Astro.props;
---

<button
  type="button"
  data-reviewer-focus={reviewer.focus}
  @click={`toggleReviewer('${reviewer.focus}')`}
  class={`group relative flex flex-col w-full items-center p-3 rounded-xl border-2 transition-all duration-200 hover:scale-105 ${
    isSelected
      ? 'border-blue-500 bg-blue-50 shadow-md'
      : 'border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm'
  }`}
>
  <!-- Avatar -->
  <div class="w-16 h-16 rounded-full overflow-hidden mb-2 border-2 border-gray-200">
    <img
      src={reviewer.image}
      alt={`${reviewer.name} avatar`}
      class="w-full h-full object-cover"
      onerror="this.src='./images/ferret_avatar.jpg'"
    />
  </div>

  <!-- Name -->
  <span class={`font-semibold text-sm ${
    isSelected ? 'text-blue-700' : 'text-gray-900'
  }`}>
    {reviewer.name}
  </span>

  <!-- Title -->
  <span class={`text-xs text-center ${
    isSelected ? 'text-blue-600' : 'text-gray-600'
  }`}>
    {reviewer.title}
  </span>

  <!-- Selection indicator - pre-rendered and hidden by default -->
  <div class={`selection-indicator absolute -top-1 -right-1 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center ${isSelected ? '' : 'hidden'}`}>
    <Check class="w-4 h-4 text-white" />
  </div>
</button>